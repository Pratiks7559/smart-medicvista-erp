{% extends 'base.html' %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/customer_select.css' %}">
{% endblock %}

{% block content %}
<div class="customer-select-container">
    <div class="customer-select-card">
        <h2 class="customer-select-title">
            <i class="fas fa-book"></i> Customer Ledger
        </h2>
        
        <div class="customer-search-wrapper">
            <input type="text" id="searchCustomer" placeholder="Search customer..." class="customer-search-input">
        </div>
        
        <div class="customers-grid">
            {% for customer in customers %}
            <a href="{% url 'customer_ledger_detail' customer.customerid %}" class="customer-card">
                <div class="customer-card-content">
                    <div class="customer-avatar">
                        {{ customer.customer_name|first|upper }}
                    </div>
                    <div class="customer-info">
                        <h4 class="customer-name">{{ customer.customer_name }}</h4>
                        <p class="customer-contact">
                            <i class="fas fa-phone"></i> {{ customer.customer_mobile|default:"N/A" }}
                        </p>
                    </div>
                    <i class="fas fa-chevron-right customer-arrow"></i>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</div>

<script>
document.getElementById('searchCustomer').addEventListener('input', function(e) {
    const search = e.target.value.toLowerCase();
    document.querySelectorAll('.customer-card').forEach(card => {
        const text = card.textContent.toLowerCase();
        card.style.display = text.includes(search) ? 'block' : 'none';
    });
});
</script>
{% endblock %}
